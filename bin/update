#!/bin/bash
if [[ $EUID -ne 0 ]]; then
  echo -e "\e[41m ERROR \e[0;97m This script must be run as root.\e[0m" 
  exit;
fi

# This script updates OriginPHP framework to the latest version
if [ -d update ]; then
    echo -e "\e[41m ERROR \e[0;97m Update folder already exists.\e[0m" 
    exit;
fi

echo 'downloading OriginPHP source code'
git clone https://github.com/originphp/originphp.git update

if [ -d update ]; then
    rm -rf update/.git

    echo 'updating framework'
    chown -R www-data:www-data update
    rm -rf origin
    rm -rf bin
    mv update/origin origin
    mv update/bin bin

    echo 'deleting tmp files'
    rm -rf update
fi
